<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CW0S29TLQS"></script>
<script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments)};gtag("js", new Date());gtag("set", "developer_id.dMDhkMT", true);gtag("config", "G-CW0S29TLQS", {"groups":"default","page_placeholder":"PLACEHOLDER_page_location"});</script>
<meta name="description" content="8/30/21   Some reminders of what is well-formed in our Mini-M, and what our typing algorithm will likely do:" />
<meta name="author" content="Frické, Martin" />
<meta name="dcterms.creator" content="Frické, Martin" />
<meta name="Generator" content="Drupal 10 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="alternate" hreflang="en" href="https://softoption.us:8888/node/717" />
<link rel="icon" href="/files/softOption.ico" type="image/vnd.microsoft.icon" />
<link rel="canonical" href="https://softoption.us:8888/node/717" />
<link rel="shortlink" href="https://softoption.us:8888/node/717" />
<link rel="prev" href="/node/721" />
<link rel="up" href="/node/712" />
<link rel="next" href="/node/719" />

    <title>MiniML: Solving the Constraints | SoftOption ®</title>
    <link rel="stylesheet" media="all" href="/sites/default/files/css/css_khtctZLP2jpcMApxNI6U-xr0v74EZxxWBYqs0fkxKLw.css?delta=0&amp;language=en&amp;theme=bartik&amp;include=eJxdjVEKwCAMxS6k80zVFSnWFnwycKcf-xnM3wSSTGNKS0UJWEcmcMh_5N6i0SWVprhttjNAlbFh8_PrVPVMGjGXitVQfHAyH51Ubg5YmNzTO34AqBU1ug" />
<link rel="stylesheet" media="all" href="/sites/default/files/css/css_QgIKm-2l_vW99o8hYWJe1FpLS9-NLija21X9jfKiHr0.css?delta=1&amp;language=en&amp;theme=bartik&amp;include=eJxdjVEKwCAMxS6k80zVFSnWFnwycKcf-xnM3wSSTGNKS0UJWEcmcMh_5N6i0SWVprhttjNAlbFh8_PrVPVMGjGXitVQfHAyH51Ubg5YmNzTO34AqBU1ug" />
<link rel="stylesheet" media="print" href="/sites/default/files/css/css_W5Rfue91kk7MvZw9gOwKjBTXLOG9VGkqiJXGc6DDCAQ.css?delta=2&amp;language=en&amp;theme=bartik&amp;include=eJxdjVEKwCAMxS6k80zVFSnWFnwycKcf-xnM3wSSTGNKS0UJWEcmcMh_5N6i0SWVprhttjNAlbFh8_PrVPVMGjGXitVQfHAyH51Ubg5YmNzTO34AqBU1ug" />

    
  </head>
  <body class="layout-one-sidebar layout-sidebar-second path-node page-node-type-book">
        <a href="#main-content" class="visually-hidden focusable skip-link">
      Skip to main content
    </a>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div id="page-wrapper">
  <div id="page">
    <header id="header" class="header" role="banner">
      <div class="section layout-container clearfix">
        
          <div class="clearfix region region-header">
    <div id="block-navigationiconsintheheader" class="block block-block-content block-block-content84cc7405-2724-49c9-8057-fe7d1e094f86">
  
      <h2>Navigation Icons in the header</h2>
    
      <div class="content">
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><!-- mf --><div id="icons"><a href="/" title="Home page"><img alt="Home" height="26" src="/themes/custom/bartikSoftOptionImages/homeMF.svg" width="32" loading="lazy"></a> <a href="/contact" title="Contact us"><img alt="Contact" height="18" src="/themes/custom/bartikSoftOptionImages/envelopeMF.svg" width="24" loading="lazy"></a> <a href="/sitemap" title="Sitemap"><img alt="Sitemap" height="26" src="/themes/custom/bartikSoftOptionImages/sitemapMF.svg" width="30" loading="lazy"></a> <a href="/search/content" title="Search"><img alt="Search" height="26" src="/themes/custom/bartikSoftOptionImages/searchMF.svg" width="26" loading="lazy"></a></div>
<!-- mf --></div>
      
    </div>
  </div>
<div id="block-bartik-branding" class="clearfix site-branding block block-system block-system-branding-block">
  
    
          <div class="site-branding__text">
              <div class="site-branding__name">
          <a href="/" rel="home">SoftOption ®</a>
        </div>
                </div>
  </div>

  </div>

        
      </div>
    </header>
          <div class="highlighted">
        <aside class="layout-container section clearfix" role="complementary">
            <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>

        </aside>
      </div>
            <div id="main-wrapper" class="layout-main-wrapper layout-container clearfix">
      <div id="main" class="layout-main clearfix">
          <div class="region region-breadcrumb">
    <div id="block-bartik-breadcrumbs" class="block block-system block-system-breadcrumb-block">
  
    
      <div class="content">
        <nav class="breadcrumb" role="navigation" aria-labelledby="system-breadcrumb">
    <h2 id="system-breadcrumb" class="visually-hidden">Breadcrumb</h2>
    <ol>
          <li>
                  <a href="/">Home</a>
              </li>
          <li>
                  <a href="/node/718">Lambda Calculus with Elementary Type Theory</a>
              </li>
          <li>
                  <a href="/node/712">Let Polymorphism and a Mini-ML Type System</a>
              </li>
        </ol>
  </nav>

    </div>
  </div>

  </div>

        <main id="content" class="column main-content" role="main">
          <section class="section">
            <a id="main-content" tabindex="-1"></a>
              <div class="region region-content">
    <div id="block-bartik-page-title" class="block block-core block-page-title-block">
  
    
      <div class="content">
      

  <h1 class="title page-title"><span class="field field--name-title field--type-string field--label-hidden">MiniML: Solving the Constraints</span>
</h1>


    </div>
  </div>
<div id="block-bartiksoftoption-system-main" class="block block-system block-system-main-block">
  
    
      <div class="content">
      
<article data-history-node-id="717" class="node node--type-book node--view-mode-full clearfix">
  <header>
    
          
      </header>
  <div class="node__content clearfix">
    
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><h6 style="text-align: right;">8/30/21</h6>
<p>&nbsp;</p>
<p>Some reminders of what is well-formed in our Mini-M, and what our typing algorithm will likely do:</p>
<ul>
<li>variables, e.g. a, b, c,&nbsp; x, y, aVariable, etc. are well-formed, but they do not have types on their own. Each one&nbsp;needs a value in the environment (i.e. in the assumptions). But we starting from an empty environment. So the typing algorithm will reject them</li>
<li>constants of known type e.g. 1,2,3 ... True, False etc. are well-formed and have a type</li>
<li>constants of unknown type e.g. A,B, C, K, AConstant are well formed, but they do not have types on their own.&nbsp;Each one&nbsp;needs a value in the environment (i.e. in the assumptions). But we starting from an empty environment. So the typing algorithm will reject them</li>
<li>applications e.g. (λa.a True), (True False), (7 True), etc. may be well-formed, and may have a type&nbsp;(depending on the types of their sub-expressions). But there is something to watch out for here. Applications are marked or identified by having parentheses around the function and the argument e.g.&nbsp;(λa.a True). This means that extra-parentheses cannot be used for style or attempted disambiguation. For example,&nbsp;(λa.(a) True)&nbsp; or&nbsp;((λa.a )True) will be rejecting as ill-formed. Once the parser sees the brackets it is expecting an application. But these sub-expressions are not applications (they lack either a function expression or an argument expression).</li>
<li>unannotated lambdas e.g.&nbsp;λa.a,&nbsp;λx.(x y) etc. are well-formed and may have have a type (depending on the types of their sub-expressions).</li>
<li>annotated lambdas e.g.&nbsp;λa:I.a,&nbsp;λx:I-&gt;B.(x y) etc. are well-formed and may have have a type (depending on the types of their sub-expressions).&nbsp;But there is something to watch out for here. The typing sub-expression associates to the right so<br>
<div style="margin-left:40px">λx:I-&gt;B-&gt;I-&gt;I-&gt;I.(x y) means&nbsp;λx:I-&gt;B-&gt;(I-&gt;(I-&gt;I))).(x y)</div>
<p>	Well, you may ask, what happens if I would like</p>
<div style="margin-left:40px">λx:((I-&gt;B)-&gt;I)-&gt;(I-&gt;I).(x y) )</div>
<p>	The answer is: you can used parentheses as you wish in typing subexpression e.g.&nbsp;λx:((I-&gt;B)-&gt;I)-&gt;(I-&gt;I).(x y) ),&nbsp;λx:((((B)))).x are all fine. When the parser is parsing types, it accepts (perhaps disambiguating) brackets. There is no possibility of confusion with an application. The context is reading a type, not reading a full lambda calculus expression.</p></li>
<li>annotated lambdas, more. Lambdas can be annotated with well-constructed type expressions, even containing type variables. But they cannot be annotated with a universally quantified genuine type scheme i.e. one starting with&nbsp;∀. The parser will reject these as not being well-formed.</li>
<li>you can use the backslash \ for&nbsp;λ (as Haskell does). The parser here will parse either of them.</li>
<li>unannotated let expressions i.e. of form let &lt;term variable&gt;= &lt;expression1&gt; in &lt;expression2&gt; are fine.</li>
<li>annotated let expressions i.e. of form let &lt;term variable&gt;:&lt;type scheme&gt;= &lt;expression1&gt; in &lt;expression2&gt; are also fine. &lt;type scheme here is any type scheme including&nbsp;genuine type schemes with a universally quantified type with type variables (i.e. not just plain types).</li>
</ul>
<h3><strong>No expression has a type that is a genuine type scheme with a universally quantified type with type variables</strong></h3>
<p>There is only one place that a full blown type scheme might appear, and that is within a let construction e.g.</p>
<p style="margin-left:40px">let identity:∀a(a-&gt;a)=λx.x in (identity 7)</p>
<p>Now, the type-scheme&nbsp;∀a(a-&gt;a) is not the type of the let expression, it is the type of subexpression 'identity' (or&nbsp;λx.x).&nbsp; The type of the let expression is actually, in this case, Int (which is the type of (identity 7) i.e. the second expression in the let form. Ah, you may say, what about this:</p>
<p style="margin-left:40px">let identity:∀a(a-&gt;a)=λx.x in identity&nbsp; ?</p>
<p>Well, that has type a-&gt;a for some type variable a. But notice, there is no universal quantifier&nbsp;∀.&nbsp;&nbsp;[You can try it for yourself below.]</p>
<h3><strong>Solving the constraints</strong></h3>
<p>In the earlier Junior Hindley Milner case, where all the constraints were equalities. The constraint list was confluent and the constraints could be solved in any order (in particular, from first to last). Unfortunately, when explicit and implicit constraints are introduced, the list loses its confluence and order matters. However, the algorithm in use here can look at the types in use (with every type being new) and it can convert instance constraints into equality constraints (roughly, if t1 is to be an instance of&nbsp;∀&lt;vars&gt;t2 then t1 needs to unify with a suitably instantiated t2).&nbsp; At this point the constraint list again becomes confluent and can be solved first to last. The solution software below will show this in action.</p>
<h3><strong>A note on the type variables you might see.</strong></h3>
<p>There are two different algorithms that might be used here, and also the expressions might be annotated or not. If they are annotated, you, the User, might use pretty well any identifier you wish (starting with a lower-case letter) as a type variable in annotation of a let expression. So, there are plenty of possibilities for appearance either as the final type or among the constraints. However, the algorithms themselves are using certain conventions. The algorithm solving constraints one-by-one will use t0, t1, t2... etc. as the type variables with t0 as the type of the original expression. However, some of the components of a constraint may be genuine type schemas with some universally quantified variables in the type. When these are processed, the universally quantified variables (indicating polytypes) will be instantiated to ordinary type variables (monotypes) and the algorithm will use i0, i1, i, .. as instances of those type variables. So you might see as a constraint solution substitution, for example, t0:i3 ; this just means that the original expression is a monotype, of any type, and the algorithm has called that type i3.</p>
<p>The other algorithm uses a0, a1, a2, ... as its type variables, but it will not display its instantiations or workings for you. So, for example, it might tell you that the type of a provided expression is a1-&gt;a3 ; this means that the type is a function any type to another, where, whatever those types are, they retain their values through the entire scope they apply to.</p>
<h3><strong>Onward ...</strong></h3>
<p>Select a well-formed lambda expression. The constraint button will calculate the constraints; then it will convert the constraint list one-by-one into substitutions (if that can be done!); the value for the algebraic variable t0 will be the type of the original expression. What you want to keep your eye on is the first constraint of a line and the first substitution of the next line. The type button will give the type directly. The programs use different algorithms. They should agree on the type!</p>
<h3>&nbsp;</h3>
<p><iframe height="2000" id="#editorMiniML" scrolling="yes" src="/sites/all/js/lambdaWidgets/src/constraintsProofMiniML.jsexe/index.html" width="100%">If you can see this, your browser does not understand IFRAME.</iframe></p>
<p>&nbsp;</p>
</div>
      
  <nav id="book-navigation-718" class="book-navigation" role="navigation" aria-labelledby="book-label-718">
    
          <h2 class="visually-hidden" id="book-label-718">Book traversal links for MiniML: Solving the Constraints</h2>
      <ul class="book-pager">
              <li class="book-pager__item book-pager__item--previous">
          <a href="/node/721" rel="prev" title="Go to previous page"><b>‹</b> MiniML: Constraints</a>
        </li>
                    <li class="book-pager__item book-pager__item--center">
          <a href="/node/712" title="Go to parent page">Up</a>
        </li>
                    <li class="book-pager__item book-pager__item--next">
          <a href="/node/719" rel="next" title="Go to next page">MiniML NOR Reduction with Expression Type <b>›</b></a>
        </li>
          </ul>
      </nav>

  </div>
</article>

    </div>
  </div>

  </div>

          </section>
        </main>
                          <div id="sidebar-second" class="column sidebar">
            <aside class="section" role="complementary">
                <div class="region region-sidebar-second">
    <div id="block-siteimage" class="block block-block-content block-block-content0ded7434-e98a-4e3c-92cc-5dc0bb6bd1b4">
  
    
      <div class="content">
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><script type="text/javascript">
<!--
 var imlocation = "/files/RandomImages/";
 var currentdate = 0;
 var image_number = 0;
 function ImageArray (n) {
   this.length = n;
   for (var i =1; i <= n; i++) {
     this[i] = ' '
   }
 }
 image = new ImageArray(16)
 image[0] = '1.png'
 image[1] = '2.png'
 image[2] = '3.png'
 image[3] = '4.png'
 image[4] = '5.png'
 image[5] = '6.png'
 image[6] = '7.png'
 image[7] = '8.png'
 image[8] = '9.png'
 image[9] = '10.png'
 image[10] = '11.png'
 image[11] = '12.png'
 image[12] = '13.png'
 image[13] = '14.png'
 image[14] = '15.png'
 image[15] = '16.png'
 var rand = 60/image.length
 function randomimage() {
 	currentdate = new Date()
 	image_number = currentdate.getSeconds()
 	image_number = Math.floor(image_number/rand)
 	return(image[image_number])
 }
 

document.write("<img src='" + imlocation + randomimage()+ "'>");






//-->
</script></div>
      
    </div>
  </div>

<nav role="navigation" aria-labelledby="block-bartik-tools-menu" id="block-bartik-tools" class="block block-menu navigation menu--tools">
      
  <h2 id="block-bartik-tools-menu">Navigation</h2>
  

        <div class="content">
            <div class="menu-toggle-target menu-toggle-target-show" id="show-block-bartik-tools"></div>
      <div class="menu-toggle-target" id="hide-block-bartik-tools"></div>
      <a class="menu-toggle" href="#show-block-bartik-tools">Show &mdash; Navigation</a>
      <a class="menu-toggle menu-toggle--hide" href="#hide-block-bartik-tools">Hide &mdash; Navigation</a>
      
              <ul class="clearfix menu">
                    <li class="menu-item">
        <a href="/browse" title="Items to browse." data-drupal-link-system-path="node/208">Browse</a>
              </li>
                <li class="menu-item">
        <a href="/search/content" data-drupal-link-system-path="search/content">Search</a>
              </li>
                <li class="menu-item">
        <a href="/sitemap" title="Display a site map with RSS feeds." data-drupal-link-system-path="sitemap">Site map</a>
              </li>
        </ul>
  


    </div>
  </nav>
<div id="block-booknavigation" class="block block-book block-book-navigation">
  
    
      <div class="content">
      
              <ul class="menu">
                    <li class="menu-item">
        <a href="/node/671" hreflang="en">Simply Typed Lambda Calculus</a>
              </li>
                <li class="menu-item menu-item--collapsed">
        <a href="/node/676" hreflang="en">Junior Hindley-Milner I</a>
              </li>
                <li class="menu-item">
        <a href="/node/680" hreflang="en">Polymorphism, Annotation, and Decidable Type Inference</a>
              </li>
                <li class="menu-item menu-item--expanded menu-item--active-trail">
        <a href="/node/712" hreflang="en">Let Polymorphism and a Mini-ML Type System</a>
                                <ul class="menu">
                    <li class="menu-item">
        <a href="/node/714" hreflang="en">Let Polymorphism in Mini ML</a>
              </li>
                <li class="menu-item">
        <a href="/node/721" hreflang="en">MiniML: Constraints</a>
              </li>
                <li class="menu-item menu-item--active-trail">
        <a href="/node/717" hreflang="en">MiniML: Solving the Constraints</a>
              </li>
                <li class="menu-item">
        <a href="/node/719" hreflang="en">MiniML NOR Reduction with Expression Type</a>
              </li>
                <li class="menu-item">
        <a href="/node/722" hreflang="en">MiniML: Drawing It to a Conclusion</a>
              </li>
        </ul>
  
              </li>
                <li class="menu-item">
        <a href="/node/723" hreflang="en">Polymorphic Lambda Calculus: System F</a>
              </li>
                <li class="menu-item menu-item--collapsed">
        <a href="/node/672" hreflang="en">Intuitionistic Propositional Logic</a>
              </li>
        </ul>
  


    </div>
  </div>

  </div>

            </aside>
          </div>
              </div>
    </div>
        <footer class="site-footer">
      <div class="layout-container">
                          <div class="site-footer__bottom">
              <div class="region region-footer-fifth">
    <div id="block-bartiksoftoption-block-6" class="block block-block-content block-block-content52898772-4b33-4c3e-98d1-b8ffdd41102e">
  
    
      <div class="content">
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item">Copyright SoftOption ® Ltd. (New Zealand). Email: <a href="mailto:support@SoftOption.Us">support@SoftOption.Us</a></div>
      
    </div>
  </div>

  </div>

          </div>
              </div>
    </footer>
  </div>
</div>

  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","pathPrefix":"","currentPath":"node\/717","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"google_analytics":{"account":"G-CW0S29TLQS","trackOutbound":true,"trackMailto":true,"trackTel":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"statistics":{"data":{"nid":"717"},"url":"\/modules\/contrib\/statistics\/statistics.php"},"user":{"uid":0,"permissionsHash":"cd3d927c0e91f5444b560052ed2f3907b0b1a7d67939ee3e1d9d0bb7ebab88dd"}}</script>
<script src="/sites/default/files/js/js_8QBjledv09z8pzIS-vyTO6xcgINbsE-jAQBxU-jZLnc.js?scope=footer&amp;delta=0&amp;language=en&amp;theme=bartik&amp;include=eJxLz89Pz0mNT8xLzKksyUwu1k9HE9ApLkksySwGy6UUlRYk5ughRAAWtRkf"></script>

  </body>
</html>
