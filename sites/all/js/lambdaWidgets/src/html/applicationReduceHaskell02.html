<!--  8/6/20 11:44

-->

<!DOCTYPE html>
<html>
<head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>One-step Reduce</title>
    <style>
        body {
            background-color: lightgray;
            color: black;
        }
    </style>

    <link type="text/css" rel="stylesheet" href="../build/jodit.min.css">
    <script type="text/javascript" src="../build/jodit.min.js"></script>
    <script type="text/javascript" src="../build/jquery.min.js"></script>
    <script type="text/javascript" src="../js/unifiedScripts.js"></script>

  <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-balham.css">

</head>
<body>
  <h3 style="display: inline-block;">One-step Reduce in Haskell Notation</h3>
  
  

  <textarea id="editor" name="editor"></textarea>

  <p><button id="message_button2"  onclick="reduce1(editor)" 
      style="height:40px;font-size: 16px;border-radius: 8px;box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);" 
      >Reduce selected redex</button></p>
  
  <script>
  const editor = new Jodit("#editor", {
          extraButtons: ["symbol"]
      });
 
  </script>


<!--
  <button onclick="getSelectedRows()">Get Selected Rows</button>
-->

  <div id="myGrid" style="height: 600px;width:500px;" class="ag-theme-balham"></div>

  <script type="text/javascript" charset="utf-8">
    // specify the columns
  

    var columnDefs = [
  {
    headerName: '',
    field: 'fLineno',
  //  cellStyle: { 'font-size': 'large'},
    pinned: 'left',
    type: "numericColumn",
    width:20,
  },
  {
    headerName: 'Formula',
    field: 'fFormula',
    resizable: true,
  },
  {
    headerName: 'Justification',
    field: 'fJustification',
  },
];


    var autoGroupColumnDef = {
        headerName: "Model", 
        field: "model", 
        cellRenderer:'agGroupCellRenderer',
        cellRendererParams: {
            checkbox: true
        }
    }

    // let the grid know which columns and what data to use
    var gridOptions = {
      columnDefs: columnDefs,               //new def
      //autoGroupColumnDef: autoGroupColumnDef,
      groupSelectsChildren: true,
      rowSelection: 'multiple'
    };

  // lookup the container we want the Grid to use
  var eGridDiv = document.querySelector('#myGrid');

  // create the grid passing in the div to use together with the columns & data we want to use
  new agGrid.Grid(eGridDiv, gridOptions);
  
  function getSelectedRows() {
    const selectedNodes = gridOptions.api.getSelectedNodes()  
    const selectedData = selectedNodes.map( function(node) { return node.data })
    const selectedDataStringPresentation = selectedData.map( function(node) { return node.make + ' ' + node.model }).join(', ')
    alert('Selected nodes: ' + selectedDataStringPresentation);
  }
  </script>



<script>
//const results = document.getElementById('results');

const editorText2 = 

"<p>Convince yourself of the following:- <span style=\"float:right;font-size: 8px;\" >8/10/20</span> </p>" +
"<p> a) (λx->(x x)) λx->(x x) can be rewritten forever. {- If an expression has a subexpression that can be reduced to itself, that subexpression can be reduced to itself again ... and again ... -}</p>" +
"<p> b) (λx y->y) a b    => (λy->y) b    => b <em>you need to reduce one variable at a time (the outer one)</em> </p>" +
"<p> b') (λx->λy->y) a b    => (λy->y) b    => b </p>" +

"<p> c) (λx y->y) ((λx->(x x)) λx->(x x)) b    => (λy->y) b    => b {- this is like (b) except that we have put self-application in for the argument 'a'. -}</p>" +
"<p> c') (λx->λy->y) ((λx->(x x)) λx->(x x)) b    => (λy->y) b    => b {- this is like (b') except that we have put self-application in for the argument 'a'. -}</p>" +

"<p> d) (λx y->y) ((λx->(x x)) λx->(x x)) b    => b {- same as (c) but show it can be rewritten forever -}</p>"+
"<p> d') (λx->λy->y) ((λx->(x x)) λx->(x x)) b    => b {- same as (c') but show it can be rewritten forever -}</p>";


 




initializeEditorAndGrid(editor, gridOptions, editorText2);
var rowDataInit = [{fLineno: '1', fFormula: '', fJustification: ''},]; //the line format varies from widget to widget
    gridOptions.api.setRowData(rowDataInit);
    gridOptions.columnApi.autoSizeColumns();



</script>



</body>
</html>