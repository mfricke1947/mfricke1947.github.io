<!--  9/13/19 11:44

-->

<!DOCTYPE html>
<html>
<head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>One-step Reduce</title>
    <style>
        body {
            background-color: lightgray;
            color: black;
        }
    </style>

    <link type="text/css" rel="stylesheet" href="../build/jodit.min.css">
    <script type="text/javascript" src="../build/jodit.min.js"></script>
    <script type="text/javascript" src="../build/jquery.min.js"></script>
    <script type="text/javascript" src="../js/unifiedScripts.js"></script>

  <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-balham.css">

</head>
<body>
  <h3>One-step Redex Reduce</h3>

  <textarea id="editor" name="editor"></textarea>

  <p><button id="message_button2"  onclick="reduce1(editor)" 
      style="height:40px;font-size: 16px;border-radius: 8px;box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);" 
      >Reduce selected redex</button></p>
  
  <script>
  const editor = new Jodit("#editor", {
          extraButtons: ["symbol"]
      });
 
  </script>


<!--
  <button onclick="getSelectedRows()">Get Selected Rows</button>
-->

  <div id="myGrid" style="height: 600px;width:500px;" class="ag-theme-balham"></div>

  <script type="text/javascript" charset="utf-8">
    // specify the columns
  

    var columnDefs = [
  {
    headerName: '',
    field: 'fLineno',
  //  cellStyle: { 'font-size': 'large'},
    pinned: 'left',
    type: "numericColumn",
    width:20,
  },
  {
    headerName: 'Formula',
    field: 'fFormula',
    resizable: true,
  },
  {
    headerName: 'Justification',
    field: 'fJustification',
  },
];

    var autoGroupColumnDef = {
        headerName: "Model", 
        field: "model", 
        cellRenderer:'agGroupCellRenderer',
        cellRendererParams: {
            checkbox: true
        }
    }

    // let the grid know which columns and what data to use
    var gridOptions = {
      columnDefs: columnDefs,               //new def
      //autoGroupColumnDef: autoGroupColumnDef,
      groupSelectsChildren: true,
      rowSelection: 'multiple'
    };

  // lookup the container we want the Grid to use
  var eGridDiv = document.querySelector('#myGrid');

  // create the grid passing in the div to use together with the columns & data we want to use
  new agGrid.Grid(eGridDiv, gridOptions);
  
  function getSelectedRows() {
    const selectedNodes = gridOptions.api.getSelectedNodes()  
    const selectedData = selectedNodes.map( function(node) { return node.data })
    const selectedDataStringPresentation = selectedData.map( function(node) { return node.make + ' ' + node.model }).join(', ')
    alert('Selected nodes: ' + selectedDataStringPresentation);
  }
  </script>



<script>
//const results = document.getElementById('results');

const editorText1 = "<p>Select a <em>redex</em> i.e. an application '(&ltfunction&gt &ltargument&gt)' with a lambda expression in the &ltfunction&gt position. Ask for it to be reduced. " +
"Notice that the software will do an alpha rewrite (i.e. change of bound variable) automatically should that be needed." +
"Type in your own redexes and try them. </p>" +
"<p>(\\a.a b)</p>" +
"<p>&lambda;a.ab No redex here</p>" +
"<p>λw.(λx.(λy.w a) w) An inner expression is a redex.</p>" +
"<p>(\\w.w ((λx.x λz.z) (λy.y b)))</p>" +
"<p>(λx.(x x) λy.y)</p>" +
"<p>((λx.λy.y a) b) Inner redex</p>" +
"<p>(&lambda;x.(&lambda;y.x a) y) Change of variable" +
"<p>((&lambda;a.a b) c) Inner redex</p>" +
"<p>(&lambda;x.x (&lambda;y.y a) ) Inner or outer redexes</p>" +
"<p>(&lambda;x.(&lambda;y.x a) b)</p>";

initializeEditorAndGrid(editor, gridOptions, editorText1);
var rowDataInit = [{fLineno: '1', fFormula: '', fJustification: ''},]; //the line format varies from widget to widget
    gridOptions.api.setRowData(rowDataInit);
    gridOptions.columnApi.autoSizeColumns();


</script>



</body>
</html>